---
title: "Pendel2"
author: "Justus Weyers"
date: "`r Sys.Date()`"
output:
  pdf_document: 
    df_print: kable
  html_document: default
---
```{r setup, include=FALSE, echo=FALSE} 
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```
# Versuch 2

Der zweite Versuch läuft analog zum ersten Versuch. Allerdings werden statt nur einer Messreihe 5 verschiedene - jeweils mit einer anderen Fadenlänge - gemessen. 
Um die Pendellängen zu variieren wurde der Faden für kürzere Fadenlängen mit Klebeband am Zylinder stückchenweise festgeklebt. 
Für längere Pendellängen wurden weitere Stücke Angelschnur an das Pendel geknotet. 

## Fehlerquellen

Die Fehlerquellen sind ebenfalls die selben wie beim ersten Versuch. 
Allerdings ist hierbei zu bemerken, dass die Reaktioszeit bei kürzeren Fadenlängen und daraus resultierenden kürzeren Periodendauern verhältnismäßig zunimmt. 
Auch von der Bahn abweichende Bewegungen nehmen bei kürzeren Pendellängen zu. 
Auch ist nicht untersucht, wie sich das zum kürzen der Schnur verwendete Klebeband bzw. Knoten im Faden auf das Pendelverhalten auswirken.

## Messungen

In die zu diesem Versuch gehörigen WErte wurden auch die Messwerte aus Versuch 1 integriert. 
Es wurde wieder so verfahren, dass pro Pendellänge fünf Messungen der Zeit für 10 Perioden gemessen und der Mittelwert berechnet wurde.

Die Messwerte sind die folgenden:

```{r, echo=FALSE}
# csv-Datei einlesen
Werte <- read.csv('Daten/Daten.csv', sep=";", dec=",", header=FALSE)
# Spaltennamen umbenennen
colnames(Werte) <- c("Messwert", paste("Versuch", 1:7))
# Zeilennamen umbenennen
rownames(Werte) <- c("L1:Oberes_Ende_in_cm",
                    "L2:UnteresEnde_in_cm",
                    "L3:Zylinderhoehe_in_cm",
                    "Pendellaenge_L",
                    paste("Zeit_fuer_10-Perioden_", 1:5),
                    "10-Perioden_Mittelwert")
#Ausgabe
Werte[2:ncol(Werte)]

# Transponieren der Werte für die Analyse
WerteT <- as.data.frame(t(Werte[,-1]))
```

## Auswertung

Damit sind die Werte für die Pendellänge sowie deren konstante Unsicherheit $u_L=0,00029m$, siehe \textit{Versuch 1} (Vergeleich mit Formel), bekannt.
Ebenso sind die Werte für die Periodendauer $T$ bekannt, diese entsrechen einem Zehntel der Zeit für die gemessenen zehn Perioden, vergleiche (Formel ...).
Die Unsicherheit für T ist auch aus Versuch 1 übernehmbar, diese beträgt $u_T =  0,00029s$.

Zur Veranschaulichung der Messwerte wird die Periodendauer $T$ gegen die Pendellänge aufgetragen:
```{r, echo=FALSE}
# Einbindung von benötigen Bibliotheken
library(tidyverse)

# Funktion zum einzeichnen der Fehlerbalken
errorbar <- function(x, ux, y, uy, headwidth=c(1,1)) {

  arrows(x0=x, x1=x, y0=y, y1=y+uy, 
         length=headwidth[1], angle=90)
  arrows(x0=x, x1=x, y0=y, y1=y-uy, 
         length=headwidth[1], angle=90)
  arrows(x0=x, x1=x+ux, y0=y, y1=y, 
         length=headwidth[2], angle=90)
  arrows(x0=x, x1=x-uy, y0=y, y1=y, 
         length=headwidth[2], angle=90)
}

# Eingabe von Unsicherheiten
u_T = 0.00029
u_L = 0.00029

# Selektion von  x- und y-Werten
x <- WerteT$Pendellaenge_L/100
y <- data.matrix(Werte[5:10,2:8], rownames.force = NA)/10

# Gruppierung der Daten
pltdf <- data.frame(x, t(y)) %>% gather(k, v,-x) %>% 
  mutate(MW = (k=="X10.Perioden_Mittelwert"))

# Plotten
{TFun <- function(x) 2*pi*sqrt(x/9.81)
TFuntxt <- expression("T(L)" == 2*pi*sqrt(frac("L", frac("9.81 m","s^2"))))
plot(x=pltdf$x, y=pltdf$v, 
     # Fenstergröße
     xlim=c(0, max(pltdf$x)),
     ylim=c(0, max(pltdf$v)),
     # Aesthetics
     pch=20, col="black",
     xlab="Pendellänge L [m]",
     ylab="Periodendauer T [s]")
errorbar(x=pltdf$x, ux=u_L, y=pltdf$v, uy=u_T, headwidth=c(1, 0.001))
curve(TFun(x), add=TRUE)
points(x=pltdf$x[pltdf$k=="X10.Perioden_Mittelwert"], 
       y=pltdf$v[pltdf$k=="X10.Perioden_Mittelwert"], 
       pch=20, col="red")
legend("bottomright", 
       legend=c(TFuntxt, "Mittelwert", "Einzelwert"),
       col=c("black", "red", "black"), 
       pch=c(26, 20,20), lty=c(1,0,0), cex=0.8)}
```

In diesem Diagramm sind die Fehlerbalken nicht sichtbar, was an der kleinen Fehlergröße liegt.
Zur Validierung der Messwerte wurde die Funktion $T(L)=2\pi\sqrt{\frac{L}{g}}$ mit dem Literaturwert der Erdbeschleunigung von $g=9,81\frac{m}{s^2}$ eingezeichnet. 
Daran wird ersichtlich, dass die Messwerte alles in allem ganz gut sind.
Mittels einer Linearisierung erfolgt die Berechnung von g für diesen Versuch.
Bekannt ist, dass $T^2 \propto 4\pi^2\frac{L}{g}$, vergleiche Formel (ref...). 
Daraus folgt eine Geradengleichung mit der Steigung $a=\frac{4\pi^2}{g}L$ und dem y-Achsenabschnitt $y$.
Nach der Quadrierung der Messwerte für $T$ kann eine lineare Regression durchgeführt werden.
Eine Prüfung der Korellation liefert einen Korrelationskoeffizient von $0,9998$.
```{r}
# Berechnung der linearisierten Funktionswerte
xlin=WerteT$Pendellaenge_L/100 # in m
ylin=(WerteT$`10-Perioden_Mittelwert`/10)**2 # in s
# Korellationskoeffizient
cor(x=xlin, y=ylin, method='pearson')
```

Die lineare Regression erfolgt mittels QR-Faktorisierung.
```{r}
lm(ylin~xlin)
```
Im folgenden Schaubild ist die Funktionsgerade der linearen Regression zusehen.
Dabei ist die Steigung $a=\frac{4\pi^2}{g}=4,04209$ und der y-Achsenabschnitt $y=0,01952$.
Ebenfalls eingezeichnet sind die quadrierten Mittelwerte Messwerten für die Periodendauer $T$ bei den untersuchten Pendellängen.

```{r, echo=FALSE}
#Plotten
{par(mar=c(5,5,2,2))
plot(xlin, ylin, col="transparent",
     xlim=c(0, max(xlin)),
     ylim=c(0, max(ylin)),
     xlab="Pendellänge L [m]",
      ylab=expression(paste("Quadrierte Periodendauer T"^"2", "[s"^"2","]")))
abline(coef=c(0.01952, 4.04209))
points(xlin, ylin, pch=17, col="red")
legend("bottomright", 
       legend=c(expression(paste("T"^2 == a*L+y )), "Mittelwert T"),
       col=c("black", "red"), 
       pch=c(26, 17), lty=c(1,0))}
```

Aus der Steigung $a$ kann die Erdbeschleunigung $g$ bestimmt werden:

\begin{align*}
a&= \frac{4\pi^2}{g}\\
\Rightarrow g &= \frac{4\pi^2}{4,04209}\\
 &= 9,766832901879 [\frac{m}{s^2}]\\
\end{align*}

